<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <title>8-6. 컴포넌트 데이터 부모 데이터와 동기화</title>
    </head>
    <body>
        <div id="app">
        	<div class="container">
				<h1>Let's hear some stories!</h1>
				<ul class="list-group">
					<story v-for="story in stories" :story="story" :favorite="favorite" @update="updateFavorite" class ="list-group-item"></story>
				</ul>
				<pre> {{$data}} </pre>
			</div>
		</div>
		<template id="story-template">
		    <li class="list-group-item">
		    	{{ story.writer }} said "{{ story.plot }}".
		    	Story upvotes {{ story.upvotes }}.
      			<button v-show="!story.voted" @click="upvote" class="btn btn-default">
        			Upvote
        		</button>
        		<button v-show="!isFavorite" @click="updateFavorite" class="btn btn-primary">
        			Favorite
        		</button>
        		<span v-show="isFavorite" class="glyphicon glyphicon-star pull-right" aria-hidden="ture"></span>
    		</li>
		</template>
	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js"></script>
	
	<script type="text/javascript">
		Vue.component('story', {
			props: ['story', 'favorite'],
			template: "#story-template",
			methods:{
				upvote: function() {
					this.story.upvotes += 1;
					this.story.voted = true;
				},
				updateFavorite: function() {
					//update 는 사용자 정의 이벤트의 이름으로서
					// 어떤 것으로든 지정할 수 있습니다
					this.$emit('update', this.story)
				}
			},
			computed: {
				isFavorite : function() {
					return this.story == this.favorite;
				}
			}
		});

		new Vue({
		  el: '#app',
		  data: {
		    stories: [
		      {
		        body: "I crashed my car today!",
		        writer: "Alex",
		        upvotes:28,
		        voted:false,
		      },
		      {
		        body: "Yesterday, someone stole my bag!",
		        writer: "John",
		        upvotes:8,
		        voted:false,
		      },
		      {
		        body: "Someone ate my chocolate...",
		        writer: "John",
		        upvotes:49,
		        voted:false,
		      },
		      {
		        body: "I ate someone's chocolate!",
		        writer: "Alex",
		        upvotes:74,
		        voted:false,
		      },
		    ],
		    favorite: {}
		  },
		  methods: {
		  	updateFavorite:function(story) {
				this.favorite = story;
			}
		  },
		})
	</script>
</html>