<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <title>8-7. 연습 문제</title>
    </head>
    <body>
        <div id="app">
        	<div class="container">
				<h1>Chariot shopping</h1>
				<ul class="list-group">
					<chariot v-for="chariot in chariots" :chariot="chariot" :pick="pick" @pick="updateChariot" class ="list-group-item"></chariot>
				</ul>
				<pre> {{$data}} </pre>
			</div>
		</div>
		<template id="chariot-template">
		    <li class="list-group-item">
		    	"{{chariot.name}}" chariot has {{chariot.horses}} horse(s)!
        		<button @click="pickChariot(chariot)" class="btn btn-primary" :disabled="isCurrent">
        			{{action}}
        		</button>
    		</li>
		</template>
	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.4/vue.min.js"></script>
	
	<script type="text/javascript">
		Vue.component('chariot', {
			props: ['chariot', 'pick'],
			template: "#chariot-template",
			methods:{
				pickChariot: function(chariot) {
					//update 는 사용자 정의 이벤트의 이름으로서
					// 어떤 것으로든 지정할 수 있습니다
					this.$emit('pick', this.chariot)
				}
			},
			computed: {
				//is true when the chariot has more horses than the current one
	            hasMoreHorses: function () {
	                return this.pick.horses < this.chariot.horses
	            },
	            //is true when the chariot is the current one
	            isCurrent: function () {
	                return this.pick.name === this.chariot.name
	            },
	            //is true when there is no chariot current
	            noChariot: function () {
	                return this.pick.name === null;
	            },
	            //define the action for each chariot
	            action: function () {
	                var action;
	                if (this.noChariot) {
	                    action = 'Pick Chariot'
	                } else if (this.isCurrent) {
	                    action = 'Riding!'
	                } else if (this.hasMoreHorses) {
	                    action = 'Hire Horses'
	                } else {
	                    action = 'Dismiss Horses'
	                }
	                return action;
	            }
			}
		});

		new Vue({
		  el: '#app',
		  data: {
		    chariots: [
		      {
		        name: "Olympus",
		        horses : 4,
		        voted:false,
		      },
		      {
		        name: "Sagitta",
		        horses : 3,
		        voted:false,
		      },
		      {
		        name: "Icarus",
		        horses : 2,
		        voted:false,
		      },
		      {
		        name: "Abraxas",
		        horses : 1,
		        voted:false,
		      },
		    ],
		    pick: {}
		  },
		  methods: {
		  	updateChariot:function(chariot) {
				this.pick = chariot;
			}
		  },
		})
	</script>
</html>